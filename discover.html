<html>
<head>
  <link href="style.css" rel="stylesheet" type="text/css">
  <link href="discover.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <title>Docuphile</title>
</head>

<body>
  <header class="header">
    <a href="#" class="logo">Docuphile</a>
    <nav class="nav-items">
      <a href="index.php">Home</a>
      <a href="discover.html">Discover</a>
      <a href="watchlist.html">Watchlist</a>
      <a href="contact.html">Contact</a>
      <a href="login.php">Account</a>
    </nav>
  </header>

  <section class="hero-section">
    <div class="card-grid">
      <a class="card" data-id="1" href="#">
        <div class="card__background" style="background-image: url(https://postersbyus.dk/cdn/shop/products/planet-earth-natur-plakat-natur-28730976501863_2048x.jpg?v=1634635882)"></div>
        <div class="card__content">
          <p class="card__category">Nature, Wildlife</p>
          <h3 class="card__heading">Planet Earth</h3>
          <button class="quick-view" data-id="1">Quick View</button>
          <button class="add-to-watchlist" data-id="1">Add to Watchlist</button>
        </div>
      </a>
      <a class="card" data-id="2" href="#">
        <div class="card__background" style="background-image: url(https://m.media-amazon.com/images/I/41UELcy8xqL._AC_.jpg)"></div>
        <div class="card__content">
          <p class="card__category">Marine Biology, Nature</p>
          <h3 class="card__heading">The Blue Planet</h3>
          <button class="quick-view" data-id="2">Quick View</button>
          <button class="add-to-watchlist" data-id="2">Add to Watchlist</button>
        </div>
      </a>
      <a class="card" data-id="3" href="#">
        <div class="card__background" style="background-image: url(https://resizing.flixster.com/Vf9zqzYw3oq4EM5MfyJOeWydqZM=/206x305/v2/https://resizing.flixster.com/Rqo6wWi-eNGAbjz8EXp3wTRRcn4=/ems.cHJkLWVtcy1hc3NldHMvbW92aWVzLzE5YTZkOTgzLTFlNTAtNGE5MS1hMzBkLWJjZDNkODVlNGU1NC5qcGc=)"></div>
        <div class="card__content">
          <p class="card__category">Historical</p>
          <h3 class="card__heading">The Civil War (Ken Burns)</h3>
          <button class="quick-view" data-id="3">Quick View</button>
          <button class="add-to-watchlist" data-id="3">Add to Watchlist</button>
        </div>
      </a>
      <a class="card" data-id="4" href="#">
        <div class="card__background" style="background-image: url(https://cdn.mos.cms.futurecdn.net/2Qg6zvbGeyayVqvZ2GgWmX.jpg.webp)"></div>
        <div class="card__content">
          <p class="card__category">Documentary</p>
          <h3 class="card__heading">The Social Dilemma</h3>
          <button class="quick-view" data-id="4">Quick View</button>
          <button class="add-to-watchlist" data-id="4">Add to Watchlist</button>
        </div>
      </a>
      
      <a class="card" data-id="5" href="#">
        <div class="card__background" style="background-image: url(https://m.media-amazon.com/images/I/81cYF6qUoSL._SY522_.jpg)"></div>
        <div class="card__content">
          <p class="card__category">Nature</p>
          <h3 class="card__heading">My Octopus Teacher</h3>
          <button class="quick-view" data-id="5">Quick View</button>
          <button class="add-to-watchlist" data-id="5">Add to Watchlist</button>
        </div>
      </a>
      
      <a class="card" data-id="6" href="#">
        <div class="card__background" style="background-image: url(https://goldendiscs.ie/cdn/shop/products/81onxtOPKpL._AC_SL1500_540x@2x.jpg?v=1690713680)"></div>
        <div class="card__content">
          <p class="card__category">Nature</p>
          <h3 class="card__heading">Planet Earth II</h3>
          <button class="quick-view" data-id="6">Quick View</button>
          <button class="add-to-watchlist" data-id="6">Add to Watchlist</button>
        </div>
      </a>
      
      <a class="card" data-id="7" href="#">
        <div class="card__background" style="background-image: url(https://cdn.prod.website-files.com/604544cb2c71103bae8c7dff/60887e9e6cd41498795b9e5a_13th-CultureHoney.jpg)"></div>
        <div class="card__content">
          <p class="card__category">Social Issues</p>
          <h3 class="card__heading">13th</h3>
          <button class="quick-view" data-id="7">Quick View</button>
          <button class="add-to-watchlist" data-id="7">Add to Watchlist</button>
        </div>
      </a>
      
      <a class="card" data-id="8" href="#">
        <div class="card__background" style="background-image: url(https://resizing.flixster.com/yuBMQ8kD_r7VeGuYyBPtkkYXB-k=/fit-in/705x460/v2/https://resizing.flixster.com/-XZAfHZM39UwaGJIFWKAE8fS0ak=/v3/t/assets/p14891466_v_h9_aa.jpg)"></div>
        <div class="card__content">
          <p class="card__category">Biography</p>
          <h3 class="card__heading">Won't You Be My Neighbor?</h3>
          <button class="quick-view" data-id="8">Quick View</button>
          <button class="add-to-watchlist" data-id="8">Add to Watchlist</button>
        </div>
      </a>
      
      <a class="card" data-id="9" href="#">
        <div class="card__background" style="background-image: url(https://m.media-amazon.com/images/M/MV5BZDg1NDMwMGQtMmFkZS00NTQwLTkxYjktMTlhNjI2NzNlYTQ1XkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg)"></div>
        <div class="card__content">
          <p class="card__category">Documentary</p>
          <h3 class="card__heading">The Act of Killing</h3>
          <button class="quick-view" data-id="9">Quick View</button>
          <button class="add-to-watchlist" data-id="9">Add to Watchlist</button>
        </div>
      </a>
      
      <a class="card" data-id="10" href="#">
        <div class="card__background" style="background-image: url(https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSzsbvJvasXngheU5Vj8_uCSgZIIONV1OqBdg&s)"></div>
        <div class="card__content">
          <p class="card__category">Biography</p>
          <h3 class="card__heading">Jiro Dreams of Sushi</h3>
          <button class="quick-view" data-id="10">Quick View</button>
          <button class="add-to-watchlist" data-id="10">Add to Watchlist</button>
        </div>
      </a>
      
      <a class="card" data-id="11" href="#">
        <div class="card__background" style="background-image: url(https://m.media-amazon.com/images/M/MV5BNTkyNTkwMzkxMl5BMl5BanBnXkFtZTcwMzAwOTE2OQ@@._V1_FMjpg_UX1000_.jpg)"></div>
        <div class="card__content">
          <p class="card__category">Nature</p>
          <h3 class="card__heading">Blackfish</h3>
          <button class="quick-view" data-id="11">Quick View</button>
          <button class="add-to-watchlist" data-id="11">Add to Watchlist</button>
        </div>
      </a>
      
      <a class="card" data-id="12" href="#">
        <div class="card__background" style="background-image: url(https://m.media-amazon.com/images/I/51TYzsJKF0L._AC_UF894,1000_QL80_.jpg)"></div>
        <div class="card__content">
          <p class="card__category">Sports</p>
          <h3 class="card__heading">Hoop Dreams</h3>
          <button class="quick-view" data-id="12">Quick View</button>
          <button class="add-to-watchlist" data-id="12">Add to Watchlist</button>
        </div>
      </a>
      
    </div>
  </section>

  <div id="quick-view-modal" style="display: none;">
    <div id="modal-content">
      <h2 id="movie-title"></h2>
      <p id="movie-category"></p>
      <p id="movie-description"></p>
      <img id="movie-image" src="" alt="Movie Image">
      <button id="close-modal">Close</button>
    </div>
  </div>

  <script>
    $(document).ready(function () {
      $('.card').hover(
        function () {
          $(this).find('.card__background').css('filter', 'grayscale(0%)');
        },
        function () {
          $(this).find('.card__background').css('filter', 'grayscale(100%)');
        }
      );

      $('.quick-view').click(function (e) {
        e.preventDefault();
        const movieId = $(this).data('id');

        $.ajax({
          url: 'getMovieDetails.php',
          method: 'GET',
          data: { id: movieId },
          success: function (response) {
            const movie = JSON.parse(response);

            if (movie.error) {
              alert(movie.error);
            } else {
              $('#movie-title').text(movie.title);
              $('#movie-category').text(movie.category);
              $('#movie-description').text(movie.description);
              $('#movie-image').attr('src', movie.image);

              $('#quick-view-modal').show();
            }
          },
          error: function () {
            alert('Failed to fetch movie details.');
          }
        });
      });

      $('#close-modal').click(function () {
        $('#quick-view-modal').hide();
      });
      
      $('.add-to-watchlist').click(function (e) {
    e.preventDefault();
    const movieId = $(this).data('id');  

    $.ajax({
        url: 'addToWatchlist.php',
        method: 'POST',
        data: { movie_id: movieId },  
        success: function (response) {
            const result = JSON.parse(response);
            if (result.success) {
                alert('Movie added to watchlist');
            } else {
                alert(result.error || 'Error adding movie to watchlist.');
            }
        },
        error: function () {
            alert('Failed to add to watchlist.');
        }
    });
});
    });
  </script>
</body>

</html>